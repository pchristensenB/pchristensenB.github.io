<!doctype html>
<html lang="en">

<head>


	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<!-- Box preview SDK -->
	<link rel="stylesheet" href="https://cdn01.boxcdn.net/platform/elements/9.1.1/en-US/uploader.css">
	<script src="https://cdn01.boxcdn.net/platform/elements/9.1.0/en-US/uploader.js"></script>

	<script>

		$(document).ready(function() {
			var params = new URLSearchParams(window.location.search);
			var entries = params.entries();
			for(pair of entries) {
				console.log(pair[0] + "=" + pair[1]);
			}
			var clientId = params.get("c");
			var userLogin=params.get("u");
			var folderId = params.get("f");
			var urlParams = "code=Jq4te0OgMV6LCHpC0NrJu91aZpS/M0x56e6MzZdROAEL2kdkocaLmA==&clientId=" + clientId + "&userEmail=" + userLogin + "&requestedTokens=scopedToken&requestedScopes=base_upload&resourceId=" + folderId + "&resourceType=folders";
			console.log(urlParams);
			var settings = {
				"async": true,
				"crossDomain": true,
				"url": "https://bl2vhdoqzh.execute-api.eu-west-2.amazonaws.com/default/box-jwt-tokengenerator?" + urlParams,
				"method": "GET",
				"headers": {}
			};
			$.ajax(settings).done(function(response) {
				accessToken = response.scopedToken;
				var contentUploader = new Box.ContentUploader();
				contentUploader.show(folderId, accessToken, {
					container: '.pcontainer'
				});
			});
		});
		//});
	</script>
</head>

<body>

	<div class="tab-pane show active mts" role="tabpanel" id="explorer">
	Upload claim video and images by dragging onto the area below or use the browse button to browse your local system
		<div style="height:500px" class="pcontainer"></div>
		<div style="height:500px" class="ocontainer"></div>
	</div>
</body>

</html>
