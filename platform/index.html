<html>
<head>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <link href="/platform/index.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
  //declare event to run when div is visible


$(document).ready(function() {
    $("div.bhoechie-tab-menu>div.list-group>a").click(function(e) {
        e.preventDefault();
        $(this).siblings('a.active').removeClass("active");
        $(this).addClass("active");
        var index = $(this).index();
        $("div.bhoechie-tab>div.bhoechie-tab-content").removeClass("active");
        $("div.bhoechie-tab>div.bhoechie-tab-content").eq(index).addClass("active");
        var id = $("div.bhoechie-tab>div.bhoechie-tab-content").eq(index).attr("id");
        if(id=='workbench') {
          $("#framew").attr("src", "/platform/workbench/index.html?app=" + sessionStorage.getItem("clientId"));
          $("#frames").attr("src", "");
          $("#framec").attr("src", "");
          $("#frameh").attr("src", "");

        }
        else if(id=='scopes'){
          $("#framew").attr("src", "");
          $("#framec").attr("src", "");
          $("#frameh").attr("src", "");
          $("#frames").attr("src", "/platform/scopes/index.html?app=" + sessionStorage.getItem("clientId"));
        }
        else if(id=='canviewpath'){
          $("#frames").attr("src", "");
          $("#framew").attr("src", "");
          $("#frameh").attr("src", "");
          $("#framec").attr("src", "/platform/canviewpath/index.html?app=" + sessionStorage.getItem("clientId"));
        }
        else if(id=='webhooks'){
          $("#frames").attr("src", "");
          $("#framew").attr("src", "");
          $("#framec").attr("src", "");
          $("#frameh").attr("src", "/platform/webhook/index.html?app=" + sessionStorage.getItem("clientId"));
        }
    });
    if(sessionStorage.getItem("clientId")==null) {
      $('#myModal').modal("show");
    }
    $("#modalClient").click(function(e) {
      $("#cloader").show();
      $("#modalClient").hide();
      $.get( "http://localhost:5000/sandpit", { cmd: "getApp", app: $("#clientId").val() })
      .done(function( data ) {
        console.log( data );
        if(data!='"NOT FOUND"') {
          $("#myModal").modal("hide");
          sessionStorage.setItem("clientId",data.replace('"','').replace('"',''));
        }
        else {
          window.location.replace("/platform/uploadjwt.html?includeMessage=true");
        }
      });
    });

});
</script>
</head>
<body>
<div style="margin-left:5px;width:100%;" class="container" >
	<div class="row">
        <div class="col-lg-12 col-md-12  bhoechie-tab-container">
            <div class="col-lg-1 col-md-1  bhoechie-tab-menu">
              <div class="list-group">
                <a href="#" class="list-group-item active text-center">
                  <h4 class="glyphicon glyphicon-doc"></h4><br/>Readme
                </a>
                <a href="#" class="list-group-item text-center">
                  <h4 class="glyphicon glyphicon-wrench"></h4><br/>Workbench
                </a>
                <a href="#" class="list-group-item text-center">
                  <h4 class="glyphicon glyphicon-file"></h4><br/>Scopes
                </a>
                <a href="#" class="list-group-item text-center">
                  <h4 class="glyphicon glyphicon-random"></h4><br/>Can-view-path
                </a>
                <a href="#" class="list-group-item text-center">
                  <h4 class="glyphicon glyphicon-globe"></h4><br/>Webhooks
                </a>
                <a href="#" class="list-group-item text-center">
                  <h4 class="glyphicon glyphicon-cog"></h4><br/>Token Generators
                </a>


              </div>
            </div>
            <div class="col-lg-11 col-md-11 bhoechie-tab">
              <div class="bhoechie-tab-content active">
              This platform toolbox has a number of functions to test and try
              <ul>
                <li>Workbench: Log in as any user and browse via UI element or custom list. See
                API calls being made and stream Box events directly</li>
                <li>Scopes: Shows how scoped tokens work. Select a user, a file or folder and
                show differene between scoped and standard token</li>
                <li>Can view path: See how the 'can view path' collaboration works</li>
                <li>Webhooks: Show how a live webhook responds. Select user, folder or file and event and
                webhook payload will be send to the browser</li>
                <li>Token generators: Generate token for any user via JWT or OAuth 2.0</li>
              </ul>
              </div>
              <div class="bhoechie-tab-content " id="workbench">
                <iframe id="framew" src="" width="100%" height="100%" frameborder="0">
                     </iframe>
                </div>
                <div id="scopes" class="bhoechie-tab-content">
                  <iframe id="frames" src="" width="100%" height="100%" frameborder="0">
                       </iframe>
                </div>


                <div id="canviewpath" class="bhoechie-tab-content">
                  <iframe id="framec" src="" width="100%" height="100%" frameborder="0">
                       </iframe>
                </div>
                <div id="webhooks" class="bhoechie-tab-content">
                  <iframe id="frameh" src="" width="100%" height="100%" frameborder="0">
                       </iframe>
                </div>
                <div class="bhoechie-tab-content">
                    <select class=".userselector">

                      </select>
                </div>
            </div>
        </div>
  </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="myModal">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Set clientId</h5>

      </div>
      <div class="modal-body">
        <p>Please enter client ID below</p>
        <input type=text name=clientId id="clientId"/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-primary" id="modalClient">Set ClientId</button>
        <img src="ajax-loader_t.gif" class="cloader"/>
      </div>
    </div>
  </div>
</div>

</body>
