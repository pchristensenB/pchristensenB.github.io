
<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<title>Compare documents</title>
<!-- for-mobile-apps -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- //for-mobile-apps -->
<link rel="stylesheet" href="https://cdn01.boxcdn.net/platform/elements/9.1.1/en-US/picker.css" />
<script src="https://cdn01.boxcdn.net/platform/elements/9.1.1/en-US/picker.js"></script>

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
    <script>


  var params = new URLSearchParams(window.location.search);
  $(document).ready(function(){

      $.ajax({
          method : 'get',
          url: "https://bl2vhdoqzh.execute-api.eu-west-2.amazonaws.com/default/box-tokengenerator",
          data: {authCode:params.get('auth'),id:params.get('id'),clientId:'fgwcq0ilfcydxtnyrthn2gl6vcx4857f'},
          crossDomain: true,
          timeout:120000,
          dataType:'jsonp',
          cache: false,
          beforeSend: function() {
              $('#loader').show();
              $("#foot").hide();
           },
           complete: function(){
              $('#loader').hide();
              $("#foot").show();
          },
          success : function(response){
            console.log("Success:" + response);
            var filePicker = new Box.FilePicker();
              filePicker.show('0', response.token, {
                  container: '.fileChooser',
                  maxSelectable: 1,
                  contentPreviewProps: {
                      contentSidebarProps: {
                        hasMetadata: false,
                        hasSkills: true,
                        hasProperties: true,
                        hasAccessStats: true,
                        hasActivityFeed: true,
                      defaultView:'activityFeed'
                    },
                    contentOpenWithProps: {
                      show: true
                    }
                  }
              });
              filePicker.addListener('choose', function(response) {
                $.each(response, function(k, data) {
                    id = data.id;

                });
          });
        }
          ,
          error : function(err){
            console.log(JSON.stringify(err));
            console.log("error:" + err.message);

          }
      });
   });


</script>

</head>
<body>
  <div class="content" id='main'>

  		<div class="fileChooser"></div>

  </div>
</body>
</html>
